<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Sky Data | Professional Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #7289da; --danger: #ff4757; --success: #2ed573; --bg: #0f1016; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Tahoma; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .card { background: #1a1c26; padding: 25px; border-radius: 15px; border: 1px solid #333; }
        h2 { color: var(--primary); margin-top: 0; display: flex; align-items: center; gap: 10px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-size: 14px; color: #aaa; }
        input, select, textarea { width: 100%; padding: 12px; background: #0a0b10; border: 1px solid #333; color: white; border-radius: 8px; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; margin-top: 10px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-success { background: var(--success); color: white; }
        .toggle-box { display: flex; justify-content: space-between; align-items: center; background: #252836; padding: 10px; border-radius: 8px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <h1 style="text-align: center; margin-bottom: 40px;"><i class="fas fa-shield-halved"></i> Ù…Ø±ÙƒØ² ØªØ­ÙƒÙ… Sky Data Ø§Ù„Ù…Ø·ÙˆØ±</h1>

    <div class="grid">
        <div class="card">
            <h2><i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„ØªØ±Ø­ÙŠØ¨</h2>
            <div class="input-group">
                <label>Ù‚Ù†Ø§Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ (ØµÙˆØ±Ø© 2K Ø§Ù„Ø£ØµÙ„ÙŠØ©):</label>
                <select id="welcomeChannel"></select>
            </div>
            <div class="toggle-box">
                <span>Ù†Ø¸Ø§Ù… Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø³Ø¨Ø§Ù… (Timeout 5m)</span>
                <input type="checkbox" id="antiSpam" checked>
            </div>
            <div class="toggle-box">
                <span>Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ø§Ù„Ø£ÙŠ Ø¨ÙŠ + ÙƒÙ„Ù…Ø§Øª ØªØ±Ø­ÙŠØ¨)</span>
                <input type="checkbox" id="smartReply" checked>
            </div>
            <button class="btn btn-primary" onclick="updateConfig()">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        </div>

        <div class="card">
            <h2><i class="fas fa-paper-plane"></i> Ù…Ø±ÙƒØ² Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø°ÙƒÙŠ</h2>
            <label>Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©:</label>
            <select id="targetChannel"></select>
            
            <div style="margin-top: 20px;">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:</label>
                <select id="msgType" onchange="toggleInputs()">
                    <option value="normal">Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© Ø¹Ø§Ø¯ÙŠØ© (Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø©)</option>
                    <option value="embed">Ø¥ÙŠÙ…Ø¨Ø§Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ (Embed)</option>
                </select>
            </div>

            <div id="normalInputs">
                <label>Ø§Ø®ØªØ± Ù‚Ø§Ù„Ø¨ Ø¬Ø§Ù‡Ø²:</label>
                <select onchange="document.getElementById('textContent').value = this.value">
                    <option value="">Ø±Ø³Ø§Ù„Ø© ÙØ§Ø±ØºØ©...</option>
                    <option value="ğŸ“¢ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù… Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ØŒ ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†!">Ù‚Ø§Ù„Ø¨ ØªÙ†Ø¨ÙŠÙ‡</option>
                    <option value="ğŸ® ØªÙ… Ø¨Ø¯Ø¡ ÙØ¹Ø§Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ø¢Ù†ØŒ Ø´Ø§Ø±ÙƒÙˆÙ†Ø§ ÙÙŠ ØºØ±Ù Ø§Ù„ØµÙˆØª!">Ù‚Ø§Ù„Ø¨ ÙØ¹Ø§Ù„ÙŠØ§Øª</option>
                    <option value="âœ¨ Ø´ÙƒØ± Ø®Ø§Øµ Ù„ÙƒÙ„ Ù…Ù† ÙŠØ¯Ø¹Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„ÙŠÙˆÙ…!">Ù‚Ø§Ù„Ø¨ Ø´ÙƒØ±</option>
                </select>
                <textarea id="textContent" rows="4" placeholder="Ø§ÙƒØªØ¨ Ù†ØµÙƒ Ù‡Ù†Ø§..."></textarea>
            </div>

            <div id="embedInputs" style="display: none;">
                <input type="text" id="embTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø¨Ø§Ø¯">
                <textarea id="embDesc" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ø¥ÙŠÙ…Ø¨Ø§Ø¯"></textarea>
                <input type="text" id="embFooter" placeholder="ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Footer)">
                <input type="color" id="embColor" value="#7289da">
            </div>

            <button class="btn btn-success" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†</button>
        </div>
    </div>

    <script>
        const API = "https://your-bot-link.railway.app"; // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙˆØª Ù‡Ù†Ø§

        function toggleInputs() {
            const isNormal = document.getElementById('msgType').value === 'normal';
            document.getElementById('normalInputs').style.display = isNormal ? 'block' : 'none';
            document.getElementById('embedInputs').style.display = isNormal ? 'none' : 'block';
        }

        async function updateConfig() {
            const data = {
                welcome_channel: document.getElementById('welcomeChannel').value,
                anti_spam: document.getElementById('antiSpam').checked,
                smart_reply: document.getElementById('smartReply').checked
            };
            await fetch(`${API}/update_config`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data)});
            alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¶Ø¨Ø·!");
        }

        async function sendMessage() {
            const type = document.getElementById('msgType').value;
            let data = { 
                channel_id: document.getElementById('targetChannel').value,
                type: type 
            };
            
            if(type === 'normal') {
                data.content = document.getElementById('textContent').value;
            } else {
                data.title = document.getElementById('embTitle').value;
                data.desc = document.getElementById('embDesc').value;
                data.footer = document.getElementById('embFooter').value;
                data.color = document.getElementById('embColor').value;
            }

            await fetch(`${API}/send_advanced`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data)});
            alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!");
        }

        async function init() {
            const res = await fetch(`${API}/get_status`);
            const data = await res.json();
            const opts = data.channels.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            document.getElementById('welcomeChannel').innerHTML = opts;
            document.getElementById('targetChannel').innerHTML = opts;
        }
        init();
    </script>
</body>
</html>
